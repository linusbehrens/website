<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>list-processes.js.map.html - website - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../../../../../../../../../../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="website Atom Feed" href="../../../../../../../../../../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="website Atom Feed (tags)" href="../../../../../../../../../../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../../../../../../../../../style.css" />
</head>
<body>
<table><tr><td><a href="../../../../../../../../../../../"><img src="../../../../../../../../../../logo.png" alt="" width="32" height="32" /></a></td><td><h1>website</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../../../../../../../../../../log.html">Log</a> | <a href="../../../../../../../../../../files.html">Files</a> | <a href="../../../../../../../../../../refs.html">Refs</a> | <a href="../../../../../../../../../../file/README.md.html">README</a></td></tr></table>
<hr/>
<div id="content">
<p> list-processes.js.map.html (8836B)</p><hr/><pre id="blob">
<a href="#l1" class="line" id="l1">      1</a> &lt;!DOCTYPE html&gt;
<a href="#l2" class="line" id="l2">      2</a> &lt;html&gt;
<a href="#l3" class="line" id="l3">      3</a> &lt;head&gt;
<a href="#l4" class="line" id="l4">      4</a> &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
<a href="#l5" class="line" id="l5">      5</a> &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;
<a href="#l6" class="line" id="l6">      6</a> &lt;title&gt;list-processes.js.map - dotfiles - Unnamed repository; edit this file &amp;#39;description&amp;#39; to name the repository.
<a href="#l7" class="line" id="l7">      7</a> &lt;/title&gt;
<a href="#l8" class="line" id="l8">      8</a> &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;../../../../../../favicon.png&quot; /&gt;
<a href="#l9" class="line" id="l9">      9</a> &lt;link rel=&quot;alternate&quot; type=&quot;application/atom+xml&quot; title=&quot;dotfiles Atom Feed&quot; href=&quot;../../../../../../atom.xml&quot; /&gt;
<a href="#l10" class="line" id="l10">     10</a> &lt;link rel=&quot;alternate&quot; type=&quot;application/atom+xml&quot; title=&quot;dotfiles Atom Feed (tags)&quot; href=&quot;../../../../../../tags.xml&quot; /&gt;
<a href="#l11" class="line" id="l11">     11</a> &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;../../../../../../style.css&quot; /&gt;
<a href="#l12" class="line" id="l12">     12</a> &lt;/head&gt;
<a href="#l13" class="line" id="l13">     13</a> &lt;body&gt;
<a href="#l14" class="line" id="l14">     14</a> &lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=&quot;../../../../../../../&quot;&gt;&lt;img src=&quot;../../../../../../logo.png&quot; alt=&quot;&quot; width=&quot;32&quot; height=&quot;32&quot; /&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;h1&gt;dotfiles&lt;/h1&gt;&lt;span class=&quot;desc&quot;&gt;Unnamed repository; edit this file &amp;#39;description&amp;#39; to name the repository.
<a href="#l15" class="line" id="l15">     15</a> &lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;
<a href="#l16" class="line" id="l16">     16</a> &lt;a href=&quot;../../../../../../log.html&quot;&gt;Log&lt;/a&gt; | &lt;a href=&quot;../../../../../../files.html&quot;&gt;Files&lt;/a&gt; | &lt;a href=&quot;../../../../../../refs.html&quot;&gt;Refs&lt;/a&gt; | &lt;a href=&quot;../../../../../../file/README.md.html&quot;&gt;README&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
<a href="#l17" class="line" id="l17">     17</a> &lt;hr/&gt;
<a href="#l18" class="line" id="l18">     18</a> &lt;div id=&quot;content&quot;&gt;
<a href="#l19" class="line" id="l19">     19</a> &lt;p&gt; list-processes.js.map (6236B)&lt;/p&gt;&lt;hr/&gt;&lt;pre id=&quot;blob&quot;&gt;
<a href="#l20" class="line" id="l20">     20</a> &lt;a href=&quot;#l1&quot; class=&quot;line&quot; id=&quot;l1&quot;&gt;      1&lt;/a&gt; {
<a href="#l21" class="line" id="l21">     21</a> &lt;a href=&quot;#l2&quot; class=&quot;line&quot; id=&quot;l2&quot;&gt;      2&lt;/a&gt;   &amp;quot;version&amp;quot;: 3,
<a href="#l22" class="line" id="l22">     22</a> &lt;a href=&quot;#l3&quot; class=&quot;line&quot; id=&quot;l3&quot;&gt;      3&lt;/a&gt;   &amp;quot;sources&amp;quot;: [&amp;quot;../../src/tools/list-processes.ts&amp;quot;, &amp;quot;../../src/utils/process.ts&amp;quot;],
<a href="#l23" class="line" id="l23">     23</a> &lt;a href=&quot;#l4&quot; class=&quot;line&quot; id=&quot;l4&quot;&gt;      4&lt;/a&gt;   &amp;quot;sourcesContent&amp;quot;: [&amp;quot;import { Process } from \&amp;quot;../types\&amp;quot;;\nimport { fetchRunningProcesses } from \&amp;quot;../utils/process\&amp;quot;;\n\ntype SortOrder = \&amp;quot;asc\&amp;quot; | \&amp;quot;desc\&amp;quot;;\ntype SortField = keyof Process;\n\ntype Input = {\n  /**\n   * Optional array of search terms to filter processes.\n   * For single process search, provide an array with one element.\n   * Example: [\&amp;quot;Logi\&amp;quot;] will find all processes containing \&amp;quot;Logi\&amp;quot; in their name\n   * Example: [\&amp;quot;Chrome\&amp;quot;, \&amp;quot;Firefox\&amp;quot;] will find all processes containing either \&amp;quot;Chrome\&amp;quot; or \&amp;quot;Firefox\&amp;quot;\n   */\n  searchTerm?: string[];\n  /**\n   * Field to sort by (defaults to &amp;#39;mem&amp;#39;)\n   */\n  sortBy?: SortField;\n  /**\n   * Sort order (defaults to &amp;#39;desc&amp;#39;)\n   */\n  sortOrder?: SortOrder;\n};\n\nconst sortProcesses = (processes: Process[], field: SortField = \&amp;quot;mem\&amp;quot;, order: SortOrder = \&amp;quot;desc\&amp;quot;): Process[] =&amp;gt; {\n  return [...processes].sort((a, b) =&amp;gt; {\n    const valueA = a[field];\n    const valueB = b[field];\n\n    if (valueA === valueB) return 0;\n    if (valueA === undefined) return 1;\n    if (valueB === undefined) return -1;\n\n    const comparison = valueA &amp;lt; valueB ? -1 : 1;\n    return order === \&amp;quot;desc\&amp;quot; ? -comparison : comparison;\n  });\n};\n\nconst filterProcessesBySearchTerm = (processes: Process[], searchTerms?: string[]): Process[] =&amp;gt; {\n  if (!searchTerms?.length) return processes;\n\n  return processes.filter((p) =&amp;gt; {\n    const searchIn = `${p.path} ${p.processName} ${p.appName || \&amp;quot;\&amp;quot;}`.toLowerCase();\n    return searchTerms.some((term) =&amp;gt; searchIn.includes(term.toLowerCase()));\n  });\n};\n\nconst validateResults = (processes: Process[], searchTerms?: string[]): void =&amp;gt; {\n  if (processes.length === 0 &amp;amp;&amp;amp; searchTerms?.length) {\n    throw new Error(`No processes found matching \&amp;quot;${searchTerms.join(\&amp;quot;, \&amp;quot;)}\&amp;quot;`);\n  }\n};\n\n/**\n * List out all running processes.\n * This tool can be called by AI to answer queries like,\n * \&amp;quot;What processes are running right now?\&amp;quot;\n * or \&amp;quot;list processes containing xyz\&amp;quot;\n * or \&amp;quot;list processes containing xyz and abc\&amp;quot;\n *\n * Throws an error if no processes are found matching the search terms\n */\nexport default async function listProcesses(input?: Input): Promise&amp;lt;Process[]&amp;gt; {\n  const processes = await fetchRunningProcesses();\n\n  const filteredProcesses = filterProcessesBySearchTerm(processes, input?.searchTerm);\n  validateResults(filteredProcesses, input?.searchTerm);\n\n  return sortProcesses(filteredProcesses, input?.sortBy, input?.sortOrder);\n}\n&amp;quot;, &amp;quot;import { exec } from \&amp;quot;child_process\&amp;quot;;\nimport { Process } from \&amp;quot;../types\&amp;quot;;\n\n/**\n * Get all processes from the system\n * @returns Promise&amp;lt;Process[]&amp;gt; List of processes\n */\nexport async function fetchRunningProcesses(): Promise&amp;lt;Process[]&amp;gt; {\n  return new Promise((resolve, reject) =&amp;gt; {\n    exec(`ps -eo pid,ppid,pcpu,rss,comm`, (err, stdout) =&amp;gt; {\n      if (err != null) {\n        reject(err);\n        return;\n      }\n\n      const processes = stdout\n        .split(\&amp;quot;\\n\&amp;quot;)\n        .map((line) =&amp;gt; {\n          const defaultValue = [\&amp;quot;\&amp;quot;, \&amp;quot;\&amp;quot;, \&amp;quot;\&amp;quot;, \&amp;quot;\&amp;quot;, \&amp;quot;\&amp;quot;, \&amp;quot;\&amp;quot;];\n          const regex = /(\\d+)\\s+(\\d+)\\s+(\\d+[.|,]\\d+)\\s+(\\d+)\\s+(.*)/;\n          const [, id, pid, cpu, mem, path] = line.match(regex) ?? defaultValue;\n          const processName = path.match(/[^/]*[^/]*$/i)?.[0] ?? \&amp;quot;\&amp;quot;;\n          const isPrefPane = path.includes(\&amp;quot;.prefPane\&amp;quot;);\n          const isApp = path.includes(\&amp;quot;.app/\&amp;quot;);\n\n          return {\n            id: parseInt(id),\n            pid: parseInt(pid),\n            cpu: parseFloat(cpu),\n            mem: parseInt(mem),\n            type: isPrefPane ? \&amp;quot;prefPane\&amp;quot; : isApp ? \&amp;quot;app\&amp;quot; : \&amp;quot;binary\&amp;quot;,\n            path,\n            processName,\n            appName: isApp ? path.match(/(?&amp;lt;=\\/)[^/]+(?=\\.app\\/)/)?.[0] : undefined,\n          } as Process;\n        })\n        .filter((process) =&amp;gt; process.processName !== \&amp;quot;\&amp;quot;);\n      resolve(processes);\n    });\n  });\n}\n&amp;quot;],
<a href="#l24" class="line" id="l24">     24</a> &lt;a href=&quot;#l5&quot; class=&quot;line&quot; id=&quot;l5&quot;&gt;      5&lt;/a&gt;   &amp;quot;mappings&amp;quot;: &amp;quot;yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GCAA,IAAAI,EAAqB,yBAOrB,eAAsBC,GAA4C,CAChE,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,IACtC,QAAK,gCAAiC,CAACC,EAAKC,IAAW,CACrD,GAAID,GAAO,KAAM,CACfD,EAAOC,CAAG,EACV,MACF,CAEA,IAAME,EAAYD,EACf,MAAM;AAAA,CAAI,EACV,IAAKE,GAAS,CACb,IAAMC,EAAe,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,EACtCC,EAAQ,+CACR,CAAC,CAAEC,EAAIC,EAAKC,EAAKC,EAAKC,CAAI,EAAIP,EAAK,MAAME,CAAK,GAAKD,EACnDO,EAAcD,EAAK,MAAM,cAAc,IAAI,CAAC,GAAK,GACjDE,EAAaF,EAAK,SAAS,WAAW,EACtCG,EAAQH,EAAK,SAAS,OAAO,EAEnC,MAAO,CACL,GAAI,SAASJ,CAAE,EACf,IAAK,SAASC,CAAG,EACjB,IAAK,WAAWC,CAAG,EACnB,IAAK,SAASC,CAAG,EACjB,KAAMG,EAAa,WAAaC,EAAQ,MAAQ,SAChD,KAAAH,EACA,YAAAC,EACA,QAASE,EAAQH,EAAK,MAAM,yBAAyB,IAAI,CAAC,EAAI,MAChE,CACF,CAAC,EACA,OAAQI,GAAYA,EAAQ,cAAgB,EAAE,EACjDhB,EAAQI,CAAS,CACnB,CAAC,CACH,CAAC,CACH,CDhBA,IAAMa,EAAgB,CAACC,EAAsBC,EAAmB,MAAOC,EAAmB,SACjF,CAAC,GAAGF,CAAS,EAAE,KAAK,CAACG,EAAGC,IAAM,CACnC,IAAMC,EAASF,EAAEF,CAAK,EAChBK,EAASF,EAAEH,CAAK,EAEtB,GAAII,IAAWC,EAAQ,MAAO,GAC9B,GAAID,IAAW,OAAW,MAAO,GACjC,GAAIC,IAAW,OAAW,MAAO,GAEjC,IAAMC,EAAaF,EAASC,EAAS,GAAK,EAC1C,OAAOJ,IAAU,OAAS,CAACK,EAAaA,CAC1C,CAAC,EAGGC,EAA8B,CAACR,EAAsBS,IACpDA,GAAa,OAEXT,EAAU,OAAQU,GAAM,CAC7B,IAAMC,EAAW,GAAGD,EAAE,IAAI,IAAIA,EAAE,WAAW,IAAIA,EAAE,SAAW,EAAE,GAAG,YAAY,EAC7E,OAAOD,EAAY,KAAMG,GAASD,EAAS,SAASC,EAAK,YAAY,CAAC,CAAC,CACzE,CAAC,EALgCZ,EAQ7Ba,EAAkB,CAACb,EAAsBS,IAAiC,CAC9E,GAAIT,EAAU,SAAW,GAAKS,GAAa,OACzC,MAAM,IAAI,MAAM,gCAAgCA,EAAY,KAAK,IAAI,CAAC,GAAG,CAE7E,EAWA,eAAOK,EAAqCC,EAAmC,CAC7E,IAAMf,EAAY,MAAMgB,EAAsB,EAExCC,EAAoBT,EAA4BR,EAAWe,GAAO,UAAU,EAClF,OAAAF,EAAgBI,EAAmBF,GAAO,UAAU,EAE7ChB,EAAckB,EAAmBF,GAAO,OAAQA,GAAO,SAAS,CACzE&amp;quot;,
<a href="#l25" class="line" id="l25">     25</a> &lt;a href=&quot;#l6&quot; class=&quot;line&quot; id=&quot;l6&quot;&gt;      6&lt;/a&gt;   &amp;quot;names&amp;quot;: [&amp;quot;list_processes_exports&amp;quot;, &amp;quot;__export&amp;quot;, &amp;quot;listProcesses&amp;quot;, &amp;quot;__toCommonJS&amp;quot;, &amp;quot;import_child_process&amp;quot;, &amp;quot;fetchRunningProcesses&amp;quot;, &amp;quot;resolve&amp;quot;, &amp;quot;reject&amp;quot;, &amp;quot;err&amp;quot;, &amp;quot;stdout&amp;quot;, &amp;quot;processes&amp;quot;, &amp;quot;line&amp;quot;, &amp;quot;defaultValue&amp;quot;, &amp;quot;regex&amp;quot;, &amp;quot;id&amp;quot;, &amp;quot;pid&amp;quot;, &amp;quot;cpu&amp;quot;, &amp;quot;mem&amp;quot;, &amp;quot;path&amp;quot;, &amp;quot;processName&amp;quot;, &amp;quot;isPrefPane&amp;quot;, &amp;quot;isApp&amp;quot;, &amp;quot;process&amp;quot;, &amp;quot;sortProcesses&amp;quot;, &amp;quot;processes&amp;quot;, &amp;quot;field&amp;quot;, &amp;quot;order&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;valueA&amp;quot;, &amp;quot;valueB&amp;quot;, &amp;quot;comparison&amp;quot;, &amp;quot;filterProcessesBySearchTerm&amp;quot;, &amp;quot;searchTerms&amp;quot;, &amp;quot;p&amp;quot;, &amp;quot;searchIn&amp;quot;, &amp;quot;term&amp;quot;, &amp;quot;validateResults&amp;quot;, &amp;quot;listProcesses&amp;quot;, &amp;quot;input&amp;quot;, &amp;quot;fetchRunningProcesses&amp;quot;, &amp;quot;filteredProcesses&amp;quot;]
<a href="#l26" class="line" id="l26">     26</a> &lt;a href=&quot;#l7&quot; class=&quot;line&quot; id=&quot;l7&quot;&gt;      7&lt;/a&gt; }
<a href="#l27" class="line" id="l27">     27</a> &lt;/pre&gt;
<a href="#l28" class="line" id="l28">     28</a> &lt;/div&gt;
<a href="#l29" class="line" id="l29">     29</a> &lt;/body&gt;
<a href="#l30" class="line" id="l30">     30</a> &lt;/html&gt;
</pre>
</div>
</body>
</html>
