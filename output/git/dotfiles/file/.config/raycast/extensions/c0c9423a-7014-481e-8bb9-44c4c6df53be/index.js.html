<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>index.js - dotfiles - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../../../../../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dotfiles Atom Feed" href="../../../../../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="dotfiles Atom Feed (tags)" href="../../../../../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../../../../style.css" />
</head>
<body>
<table><tr><td><a href="../../../../../../"><img src="../../../../../logo.png" alt="" width="32" height="32" /></a></td><td><h1>dotfiles</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../../../../../log.html">Log</a> | <a href="../../../../../files.html">Files</a> | <a href="../../../../../refs.html">Refs</a> | <a href="../../../../../file/README.md.html">README</a></td></tr></table>
<hr/>
<div id="content">
<p> index.js (7389B)</p><hr/><pre id="blob">
<a href="#l1" class="line" id="l1">      1</a> &quot;use strict&quot;;var C=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var J=(s,i)=&gt;{for(var a in i)C(s,a,{get:i[a],enumerable:!0})},ee=(s,i,a,u)=&gt;{if(i&amp;&amp;typeof i==&quot;object&quot;||typeof i==&quot;function&quot;)for(let d of j(i))!H.call(s,d)&amp;&amp;d!==a&amp;&amp;C(s,d,{get:()=&gt;i[d],enumerable:!(u=Q(i,d))||u.enumerable});return s};var te=s=&gt;ee(C({},&quot;__esModule&quot;,{value:!0}),s);var ae={};J(ae,{default:()=&gt;v});module.exports=te(ae);var t=require(&quot;@raycast/api&quot;),M=require(&quot;child_process&quot;);var ie=[&quot;B&quot;,&quot;kB&quot;,&quot;MB&quot;,&quot;GB&quot;,&quot;TB&quot;,&quot;PB&quot;,&quot;EB&quot;,&quot;ZB&quot;,&quot;YB&quot;],se=[&quot;B&quot;,&quot;KiB&quot;,&quot;MiB&quot;,&quot;GiB&quot;,&quot;TiB&quot;,&quot;PiB&quot;,&quot;EiB&quot;,&quot;ZiB&quot;,&quot;YiB&quot;],re=[&quot;b&quot;,&quot;kbit&quot;,&quot;Mbit&quot;,&quot;Gbit&quot;,&quot;Tbit&quot;,&quot;Pbit&quot;,&quot;Ebit&quot;,&quot;Zbit&quot;,&quot;Ybit&quot;],oe=[&quot;b&quot;,&quot;kibit&quot;,&quot;Mibit&quot;,&quot;Gibit&quot;,&quot;Tibit&quot;,&quot;Pibit&quot;,&quot;Eibit&quot;,&quot;Zibit&quot;,&quot;Yibit&quot;],L=(s,i,a)=&gt;{let u=s;return typeof i==&quot;string&quot;||Array.isArray(i)?u=s.toLocaleString(i,a):(i===!0||a!==void 0)&amp;&amp;(u=s.toLocaleString(void 0,a)),u};function x(s,i){if(!Number.isFinite(s))throw new TypeError(`Expected a finite number, got ${typeof s}: ${s}`);i={bits:!1,binary:!1,space:!0,...i};let a=i.bits?i.binary?oe:re:i.binary?se:ie,u=i.space?&quot; &quot;:&quot;&quot;;if(i.signed&amp;&amp;s===0)return` 0${u}${a[0]}`;let d=s&lt;0,y=d?&quot;-&quot;:i.signed?&quot;+&quot;:&quot;&quot;;d&amp;&amp;(s=-s);let l;if(i.minimumFractionDigits!==void 0&amp;&amp;(l={minimumFractionDigits:i.minimumFractionDigits}),i.maximumFractionDigits!==void 0&amp;&amp;(l={maximumFractionDigits:i.maximumFractionDigits,...l}),s&lt;1){let T=L(s,i.locale,l);return y+T+u+a[0]}let B=Math.min(Math.floor(i.binary?Math.log(s)/Math.log(1024):Math.log10(s)/3),a.length-1);s/=(i.binary?1024:1e3)**B,l||(s=s.toPrecision(3));let w=L(Number(s),i.locale,l),A=a[B];return y+w+u+A}var g=require(&quot;react&quot;);var S=require(&quot;react&quot;),ne=()=&gt;{};function ce(s,i){let a=(0,S.useRef)(ne);(0,S.useEffect)(()=&gt;{a.current=s},[s]),(0,S.useEffect)(()=&gt;{if(a.current(),(i??0)&gt;0){let d=Math.max(i??0,1e3),y=setInterval(()=&gt;a.current(),d);return()=&gt;clearInterval(y)}},[i])}var k=ce;var p=require(&quot;react/jsx-runtime&quot;);function v(){let[s,i]=(0,g.useState)([]),[a,u]=(0,g.useState)([]),[d,y]=(0,g.useState)(&quot;&quot;),l=(0,t.getPreferenceValues)(),B=l.shouldSearchInPaths,w=l.shouldSearchInPid,A=l.shouldPrioritizeAppsWhenFiltering,T=l.shouldShowPID,K=l.shouldShowPath,R=+l.refreshDuration,U=l.closeWindowAfterKill,$=l.clearSearchBarAfterKill,W=l.goToRootAfterKill,[F,Y]=(0,g.useState)(l.sortByMem?&quot;memory&quot;:&quot;cpu&quot;),[P,G]=(0,g.useState)(l.aggregateApps),D=()=&gt;{(0,M.exec)(&quot;ps -eo pid,ppid,pcpu,rss,comm&quot;,(e,o)=&gt;{if(e!=null)return;let r=o.split(`
<a href="#l2" class="line" id="l2">      2</a> `).map(h=&gt;{let N=[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],b=/(\d+)\s+(\d+)\s+(\d+[.|,]\d+)\s+(\d+)\s+(.*)/,[,n,f,c,m,I]=h.match(b)??N,O=I.match(/[^/]*[^/]*$/i)?.[0]??&quot;&quot;,X=I.includes(&quot;.prefPane&quot;),q=I.includes(&quot;.app/&quot;);return{id:parseInt(n),pid:parseInt(f),cpu:parseFloat(c),mem:parseInt(m),type:X?&quot;prefPane&quot;:q?&quot;app&quot;:&quot;binary&quot;,path:I,processName:O}}).filter(h=&gt;h.processName!==&quot;&quot;);i(r)})};k(D,R),(0,g.useEffect)(()=&gt;{let e=s;P&amp;&amp;(e=z(e)),e.sort((o,r)=&gt;F===&quot;memory&quot;?o.mem&gt;r.mem?-1:1:o.cpu&gt;r.cpu?-1:1),u(e)},[s,F,P]);let Z=e=&gt;e.type===&quot;prefPane&quot;?{fileIcon:e.path?.replace(/(.+\.prefPane)(.+)/,&quot;$1&quot;)??&quot;&quot;}:e.type===&quot;app&quot;||e.type===&quot;aggregatedApp&quot;?{fileIcon:e.path?.replace(/(.+\.app)(.+)/,&quot;$1&quot;)??&quot;&quot;}:&quot;/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/ExecutableBinaryIcon.icns&quot;,E=async(e,o=!1)=&gt;{let r=e.processName===&quot;-&quot;?`process ${e.id}?`:e.processName;if(!await(0,t.confirmAlert)({title:`${o?&quot;Force &quot;:&quot;&quot;}Kill ${r}?`,rememberUserChoice:!0})){(0,t.showToast)({title:`Cancelled Killing ${r}`,style:t.Toast.Style.Failure});return}(0,M.exec)(`zsh -c &#39;${o?&quot;sudo &quot;:&quot;&quot;}kill -9 ${e.id}&#39;`,h=&gt;{if(h){o?(0,t.confirmAlert)({title:`Failed Killing ${r}`,message:&quot;Please ensure that touch id/password prompt is enabled for sudo: https://dev.to/siddhantkcode/enable-touch-id-authentication-for-sudo-on-macos-sonoma-14x-4d28&quot;,primaryAction:{title:&quot;Open Link&quot;,onAction:()=&gt;(0,t.open)(&quot;https://dev.to/siddhantkcode/enable-touch-id-authentication-for-sudo-on-macos-sonoma-14x-4d28&quot;)}}):(0,t.showToast)({title:`Failed Killing ${r}`,style:t.Toast.Style.Failure});return}(0,t.showToast)({title:`Killed ${r}`,style:t.Toast.Style.Success})}),i(a.filter(h=&gt;h.id!==e.id)),U&amp;&amp;(0,t.closeMainWindow)(),W&amp;&amp;(0,t.popToRoot)({clearSearchBar:$}),$&amp;&amp;(0,t.clearSearchBar)({forceScrollToTop:!0})},_=e=&gt;{let o=[];return e.type===&quot;aggregatedApp&quot;&amp;&amp;e.appName!=null&amp;&amp;o.push(e.appName),T&amp;&amp;o.push(e.id.toString()),K&amp;&amp;o.push(e.path),o.join(&quot; - &quot;)},z=e=&gt;{let o=Array(),r=new Map;r.set(1,{process:{id:1},childNodes:[]});let h=Array();e.forEach(n=&gt;{if(n.type===&quot;app&quot;){h.push(n.id);let f=r.get(n.id);f==null?(f={process:n,childNodes:[]},r.set(n.id,f)):f.process=n;let c=r.get(n.pid);if(c==null)c={process:void 0,childNodes:[f]},r.set(n.pid,c);else if(c.process==null)c.childNodes.push(f);else{let m;for(;c?.process!=null&amp;&amp;c.process.pid!==1&amp;&amp;(m=r.get(c.process.pid))!=null;)c=m;c?.childNodes.push(f)}c.process?.id!==1&amp;&amp;(c.childNodes=c.childNodes.concat(f.childNodes),f.childNodes=[])}else o.push(n)});let N=r.get(1)?.childNodes,b=Array();return N?.forEach(n=&gt;{if(n.process==null)return;b.push(n.process.id);let f=n.childNodes.map(c=&gt;c.process?.id).filter(c=&gt;c!=null);b=b.concat(f),o.push({id:n.process.id,pid:n.process.pid,cpu:(n.childNodes?.reduce((c,m)=&gt;c+(m.process?.cpu??0),0)??0)+n.process.cpu,mem:(n.childNodes?.reduce((c,m)=&gt;c+(m.process?.mem??0),0)??0)+n.process.mem,type:&quot;aggregatedApp&quot;,path:n.process.path,processName:n.process.processName,appName:n.process.path.match(/(?&lt;=\/)[^/]+(?=\.app\/)/)?.[0]})}),o},V=a.length;return(0,p.jsx)(t.List,{isLoading:a.length===0,searchBarPlaceholder:&quot;Filter by name&quot;,onSearchTextChange:e=&gt;y(e),searchBarAccessory:(0,p.jsx)(t.List.Dropdown,{tooltip:&quot;Filter&quot;,storeValue:!0,onChange:e=&gt;Y(e),children:(0,p.jsxs)(t.List.Dropdown.Section,{title:&quot;Sort By&quot;,children:[(0,p.jsx)(t.List.Dropdown.Item,{title:&quot;CPU Usage&quot;,value:&quot;cpu&quot;}),(0,p.jsx)(t.List.Dropdown.Item,{title:&quot;Memory Usage&quot;,value:&quot;memory&quot;})]})}),children:(0,p.jsx)(t.List.Section,{title:&quot;Processes&quot;,subtitle:`${V} running`,children:a.filter(e=&gt;{if(d===&quot;&quot;)return!0;let o=e.processName.toLowerCase().includes(d.toLowerCase()),r=B&amp;&amp;e.path.toLowerCase().match(new RegExp(`.+${d}.*\\.[app|framework|prefpane]`,&quot;ig&quot;))!=null,h=w&amp;&amp;e.id.toString().includes(d),N=e.type===&quot;aggregatedApp&quot;&amp;&amp;e.appName?.toLowerCase().includes(d.toLowerCase());return o||r||h||N}).sort((e,o)=&gt;{if(A){let r=[&quot;app&quot;,&quot;aggregatedApp&quot;];if(r.includes(e.type)&amp;&amp;!r.includes(o.type))return-1;if(!r.includes(e.type)&amp;&amp;r.includes(o.type))return 1}return 0}).map((e,o)=&gt;{let r=Z(e);return(0,p.jsx)(t.List.Item,{title:e.processName,subtitle:_(e),icon:r,accessories:[{text:`${e.cpu.toFixed(2)}%`,icon:{source:&quot;cpu.svg&quot;,tintColor:t.Color.PrimaryText},tooltip:&quot;% CPU&quot;},{text:x(e.mem*1024),icon:{source:&quot;memorychip.svg&quot;,tintColor:t.Color.PrimaryText},tooltip:&quot;Memory&quot;}],actions:(0,p.jsxs)(t.ActionPanel,{children:[(0,p.jsx)(t.Action,{title:&quot;Kill&quot;,icon:t.Icon.XMarkCircle,onAction:()=&gt;E(e)}),(0,p.jsx)(t.Action,{title:&quot;Force Kill&quot;,icon:t.Icon.XMarkCircle,onAction:()=&gt;E(e,!0)}),e.path==null?null:(0,p.jsx)(t.Action.CopyToClipboard,{title:&quot;Copy Path&quot;,content:e.path}),(0,p.jsx)(t.Action,{title:&quot;Reload&quot;,icon:t.Icon.ArrowClockwise,shortcut:{key:&quot;r&quot;,modifiers:[&quot;cmd&quot;]},onAction:()=&gt;D()}),(0,p.jsx)(t.Action,{title:`${P?&quot;Disable&quot;:&quot;Enable&quot;} Aggregating Apps`,icon:t.Icon.AppWindow,shortcut:{key:&quot;tab&quot;,modifiers:[&quot;shift&quot;]},onAction:()=&gt;{G(!P),(0,t.showToast)({title:`${P?&quot;Disabled&quot;:&quot;Enabled&quot;} aggregating apps`})}})]})},o)})})})}
</pre>
</div>
</body>
</html>
